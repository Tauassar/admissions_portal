{% extends 'mainapp/base.html' %}
{% block content %}
<main>
    <div class="container chair-container">
        <div class="statistics-filtering-wrapper">
            <div class="stats">
                <h2>Total statistics</h2>
                <canvas id="myChart" width="400" height="400"></canvas>
{#                <div class="total-candidates">#}
{#                    <p>Total candidates: {{total}}</p>#}
{#                </div>#}
{#                <div class="evaluated-candidates">#}
{#                    <p>Evaluated candidates: {{evaluated_count}} </p>#}
{#                </div>#}
{#                <div class="inprocess-candidates">#}
{#                    <p>Evaluation in progress: {{non_evaluated_count}} </p>#}
{#                </div>#}
            </div>
            <form class="filter-students" action='' method="POST" onsubmit="return confirm('Do you really want to submit the form?');">
            {% csrf_token %}
                <h2>Candidates' filtering</h2>
              <label class="label-filter">Enter critical number of points to pass: {{form.threshold}} </label>
            {% for message in messages %}
                <h5 class="error_message" style="color:red">
                    {{ message }}
                </h5>
            {% endfor %}
              <input type="submit" class="button-create" value="Set">
            </form>
        </div>
        <div class="student-list">
            <h2>Candidates' list</h2>
            {%for candidate in candidates%}
                 <div class="candidate">{{candidate.first_name}} {{candidate.last_name}}: {{candidate.get_score}}</div>
            {%endfor%}
        </div>
      </div>
</main>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
<script>
var ctx = document.getElementById("myChart");
var myChart = new Chart(ctx, {
  type: 'pie',
  data: {
    labels: ['Total', 'Evaluated', 'In progress'],
    datasets: [{
      label: '# candidates',
      data: [{{total}}, {{evaluated_count}} , {{non_evaluated_count}}],
      backgroundColor: [
        'rgba(255, 99, 132, 0.5)',
        'rgba(54, 162, 235, 0.2)',
        'rgba(255, 206, 86, 0.2)'
      ],
      borderColor: [
        'rgba(255,99,132,1)',
        'rgba(54, 162, 235, 1)',
        'rgba(255, 206, 86, 1)'
      ],
      borderWidth: 1
    }]
  },
  options: {
   	//cutoutPercentage: 40,
    responsive: true,

  }
});
</script>
{% endblock %}